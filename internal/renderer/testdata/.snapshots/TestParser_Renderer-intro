{"cells":[{"source":"# Runme.dev","type":"markdown"},{"source":"This project contains the application for [runme.dev](https://runme.dev) and\nalso acts as a guinea pig to showcase the\n[Runme Extension](https://marketplace.visualstudio.com/items?itemName=stateful.runme).","type":"markdown"},{"source":"## Prerequisites","type":"markdown"},{"source":"This project is based on [Fresh](https://fresh.deno.dev/) and requires Deno to\nrun. To install Deno via homebrew on macOS:","type":"markdown"},{"attributes":{},"name":"macos","executable":"sh","lines":["# macOS","brew bundle --no-lock"],"source":"```sh\n# macOS\nbrew bundle --no-lock\n```","type":"code"},{"source":"Or the installer which also works on Linux:","type":"markdown"},{"attributes":{},"name":"macos-2","executable":"sh","lines":["# macOS or Linux","curl -fsSL https://deno.land/x/install/install.sh | sh"],"source":"```sh\n# macOS or Linux\ncurl -fsSL https://deno.land/x/install/install.sh | sh\n```","type":"code"},{"source":"Add Deno to your path:","type":"markdown"},{"attributes":{},"name":"export-denoinstall","executable":"sh","lines":["export DENO_INSTALL=\"$HOME/.deno\"","export PATH=\"$DENO_INSTALL/bin:$PATH\""],"source":"```sh\nexport DENO_INSTALL=\"$HOME/.deno\"\nexport PATH=\"$DENO_INSTALL/bin:$PATH\"\n```","type":"code"},{"source":"### Development","type":"markdown"},{"source":"Start the project:","type":"markdown"},{"attributes":{"background":"true"},"name":"deno-task","executable":"sh","lines":["deno task start"],"source":"```sh { background=true }\ndeno task start\n```","type":"code"},{"source":"Open the project in your browser:","type":"markdown"},{"attributes":{"interactive":"false"},"name":"open-httplocalhost8000","executable":"sh","lines":["open http://localhost:8000/"],"source":"```sh { interactive=false }\nopen http://localhost:8000/\n```","type":"code"},{"source":"This will watch the project directory and restart as necessary.","type":"markdown"},{"source":"### Testing","type":"markdown"},{"source":"We have added some basic components tests to verify that they render correctly, run them via:","type":"markdown"},{"attributes":{},"name":"deno-test","executable":"sh","lines":["deno test --no-check --allow-env --allow-read"],"source":"```sh\ndeno test --no-check --allow-env --allow-read\n```","type":"code"},{"source":"### Preview Content","type":"markdown"},{"source":"Doublecheck what's in the CMS to be published in the blog section:","type":"markdown"},{"attributes":{"interactive":"false"},"name":"curl-httpsapiuswest2grap","executable":"sh","lines":["curl \"https://api-us-west-2.graphcms.com/v2/cksds5im94b3w01xq4hfka1r4/master?query=$(deno run -A query.ts)\" --compressed 2\u003e/dev/null \\","| jq -r '.[].posts[] | \"\\(.title) - by \\(.authors[0].name), id: \\(.id)\"'"],"source":"```sh { interactive=false }\ncurl \"https://api-us-west-2.graphcms.com/v2/cksds5im94b3w01xq4hfka1r4/master?query=$(deno run -A query.ts)\" --compressed 2\u003e/dev/null \\\n  | jq -r '.[].posts[] | \"\\(.title) - by \\(.authors[0].name), id: \\(.id)\"'\n```","type":"code"},{"attributes":{},"name":"echo-set","executable":"sh","lines":["echo \"Set up your deno environment\"","export DENO_PROJECT_NAME=\"safe-hedgehog-53\"","export DENO_ACCESS_TOKEN=\"ddp_6wpSbCUQbUoOEcBRC8DjmoxdrNipeu2OBKIj\""],"source":"```sh\necho \"Set up your deno environment\"\nexport DENO_PROJECT_NAME=\"safe-hedgehog-53\"\nexport DENO_ACCESS_TOKEN=\"ddp_6wpSbCUQbUoOEcBRC8DjmoxdrNipeu2OBKIj\"\n```","type":"code"},{"source":"### Deployment","type":"markdown"},{"source":"To deploy this project you need to have `deployctl` installed on your system. To\ninstall, please run:","type":"markdown"},{"attributes":{},"name":"deno-install","executable":"sh","lines":["deno install \\","--allow-read --allow-write \\","--allow-env --allow-net --allow-run \\","--no-check \\","-r -f https://deno.land/x/deploy/deployctl.ts"],"source":"```sh\ndeno install \\\n  --allow-read --allow-write \\\n  --allow-env --allow-net --allow-run \\\n  --no-check \\\n  -r -f https://deno.land/x/deploy/deployctl.ts\n```","type":"code"},{"source":"Once installed successfully, create a\n[new access token](https://dash.deno.com/account#access-tokens) and export it\ninto your environment:","type":"markdown"},{"attributes":{},"name":"echo-set-2","executable":"sh","lines":["echo \"Set up your deno environment\"","export DENO_PROJECT_NAME=\"\u003cinsert-project-name\u003e\"","export DENO_ACCESS_TOKEN=\"\u003cinsert-token-here\u003e\""],"source":"```sh\necho \"Set up your deno environment\"\nexport DENO_PROJECT_NAME=\"\u003cinsert-project-name\u003e\"\nexport DENO_ACCESS_TOKEN=\"\u003cinsert-token-here\u003e\"\n```","type":"code"},{"source":"then you can run a preview deployment via:","type":"markdown"},{"attributes":{"background":"true"},"name":"deployctl-deploy","executable":"sh","lines":["deployctl deploy \\","--project=$DENO_PROJECT_NAME \\","--exclude=node_modules \\","--import-map=import_map.json \\","--token=$DENO_ACCESS_TOKEN \\","main.ts"],"source":"```sh { background=true }\ndeployctl deploy \\\n    --project=$DENO_PROJECT_NAME \\\n    --exclude=node_modules \\\n    --import-map=import_map.json \\\n    --token=$DENO_ACCESS_TOKEN \\\n    main.ts\n```","type":"code"},{"source":"-----","type":"markdown"},{"source":"\u003cp align=\"center\"\u003e\u003csmall\u003eCopyright 2022 Â© \u003ca href=\"https://stateful.com/\"\u003eStateful\u003c/a\u003e (\u003ca href=\"https://discord.gg/BQm8zRCBUY\"\u003eðŸ’¬ Join Discord\u003c/a\u003e) â€“ Apache 2.0 License\u003c/small\u003e \u003c/p\u003e\n","type":"markdown"}]}
